---

---

<div class="preloader-overlay"></div>
<div class="container">
  <div class="hero-img">
    <img src="logo-full.webp" alt="Street Logo" />
  </div>
</div>

<style>
  .preloader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: #f7efe6;
    z-index: 99;
    pointer-events: none;
  }

  .container {
    position: fixed;
    top: 120vh;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.2);
    width: 10vw;
    min-width: 80px;
    z-index: 100;
  }

  .hero-img img {
    width: 100%;
    height: auto;
  }

  /* Prevent scrolling while preloader is active */
  :global(body.preloader-active) {
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .container {
      width: 20vw;
      min-width: 100px;
    }
  }
</style>

<script>
  import { gsap } from "gsap";

  // Check if we should skip the preloader
  const urlParams = new URLSearchParams(window.location.search);
  const skipPreloader =
    sessionStorage.getItem("skipPreloader") === "true" ||
    urlParams.get("skipPreloader") === "true";

  if (skipPreloader) {
    // Hide preloader elements immediately
    document.querySelector(".preloader-overlay")?.remove();
    document.querySelector(".container")?.remove();
    document.body.classList.remove("preloader-active");
    window.dispatchEvent(new CustomEvent("preloaderComplete"));
  } else {
    // Prevent scrolling during preloader
    document.body.classList.add("preloader-active");
  }

  const tl = gsap.timeline({
    onComplete: () => {
      // Remove scroll lock
      document.body.classList.remove("preloader-active");

      // Fade out only the overlay, keep the logo
      gsap.to(".preloader-overlay", {
        duration: 0.4,
        opacity: 0,
        ease: "power2.inOut",
        onComplete: () => {
          document.querySelector(".preloader-overlay")?.remove();
        },
      });

      // Keep the logo visible and animate it to final position
      gsap.to(".container", {
        position: "absolute",
        duration: 0.01,
      });

      // Dispatch event to signal preloader completion
      window.dispatchEvent(new CustomEvent("preloaderComplete"));
    },
  });

  tl.to(".container", {
    duration: 0.8,
    top: "50vh",
    ease: "expo.inOut",
    delay: 0.2,
  });

  tl.to(".container", {
    duration: 0.8,
    scale: 1,
    top: "25vh",
    ease: "expo.inOut",
    delay: 0.3,
  });
</script>
